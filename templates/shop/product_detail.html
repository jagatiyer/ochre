{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="collection-detail-page">
    <div class="collection-detail-container">

        <!-- ADD TO CART OR BOOKING -->
        {% if not item.is_experience %}
            <form method="post" action="{% url 'shop:add_to_cart' %}">
                {% csrf_token %}
                <input type="hidden" name="product_id" value="{{ item.id }}">
                <input type="hidden" name="qty" value="1">
                <input type="hidden" name="next" value="{{ request.path }}">

                <button type="submit" class="cn shop" style="width: 180px; height: 45px;">
                    Add to Cart
                </button>
            </form>
        {% else %}
            {% if request.GET.booked %}
                <p class="booking-success">Your booking request has been received. We will contact you shortly.</p>
            {% else %}
                <form class="contact-form" method="post" action="{% url 'shop:experience_booking_create' %}">
                    {% csrf_token %}
                    <input type="hidden" name="experience_id" value="{{ item.id }}">

                    <div class="form-row">
                        <input type="text" name="customer_name" placeholder="Your Name" required>
                        <input type="email" name="customer_email" placeholder="Email Address" required>
                    </div>

                    <div class="form-row">
                        <input type="tel" name="customer_phone" placeholder="Phone Number">
                        <input type="text" aria-hidden="true" style="visibility:hidden; height:0; padding:0; border:0;">
                    </div>

                    <textarea name="notes" placeholder="Notes" rows="4"></textarea>

                    <button type="submit" class="cn shop" style="width: 180px; height: 45px;">
                        Book Now
                    </button>
                </form>
            {% endif %}
        {% endif %}

        <!-- FULL DESCRIPTION -->
        {% if item.description %}
        <div class="collection-detail-content">
            {{ item.description|safe }}
        </div>
        {% endif %}

        <!-- BACK LINK -->
        <a href="{% url 'shop:shop_index' %}" class="back-to-collections">
            ‚Üê Back to Shop
        </a>

    </div>
</div>
{% endblock %}
