{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="collection-detail-page">

    <div class="collection-detail-container">

        <!-- LEFT: IMAGE -->
        <div class="collection-detail-image">
            {% if item.image %}
                <img src="{{ item.image.url }}" alt="{{ item.title }}">
            {% else %}
                <img src="{% static 'img/placeholder.png' %}" alt="{{ item.title }}">
            {% endif %}
        </div>

        <!-- RIGHT: DETAILS -->
        <div class="collection-detail-info">

            <div class="collection-detail-category">
                {{ item.category.name }}
            </div>

            <h1 class="collection-detail-title">{{ item.title }}</h1>

            {% if item.description %}
            <p class="collection-detail-excerpt">
                {{ item.description|striptags|truncatewords:30 }}
            </p>
            {% endif %}

            <!-- PRICE -->
            <div style="font-size: 22px; color: #00d2c7; margin-bottom: 24px;">
                {{ item.price_display }}
            </div>

            <!-- ADD TO CART FORM -->
            <form method="post" action="{% url 'shop:add_to_cart' %}">
                {% csrf_token %}
                <input type="hidden" name="product_id" value="{{ item.id }}">
                <input type="hidden" name="qty" value="1">
                <input type="hidden" name="next" value="{{ request.path }}">

                <button type="submit" class="cn shop" style="width: 180px; height: 45px;">
                    Add to Cart
                </button>
            </form>

            <!-- FULL DESCRIPTION -->
            {% if item.description %}
            <div class="collection-detail-content">
                {{ item.description|safe }}
            </div>
            {% endif %}

            <!-- BACK LINK -->
            <a href="{% url 'shop:shop_index' %}" class="back-to-collections">
                ‚Üê Back to Shop
            </a>

        </div>
    </div>
</div>
{% endblock %}
