{% extends "base.html" %}
{% block content %}

  <section class="media-page commercials-page">
    <div class="collections-header">
      <div class="craft-spirits">
        <span class="dash">—</span> OUR COMMERCIALS <span class="dash">—</span>
      </div>

      <h1>Commercials</h1>
    </div>
    <div class="products-scroll" style="max-width:1200px; margin:0 auto; padding:0 20px;">
      {% if videos %}
      {% for video in videos %}

        {% if video.video and video.video.name %}
          <div class="collection-card">
            <video controls preload="metadata" loop muted playsinline>
              <source src="{{ video.video.url }}">
              Your browser does not support the video tag.
            </video>
            {# per-video titles intentionally omitted for grid coherence #}
          </div>

        {% elif video.embed_html %}
          {% with emb=video.embed_html|lower %}
            {% if "example.com" not in emb %}
              <div class="collection-card">
                {{ video.embed_html|safe }}
                {# per-video titles intentionally omitted for grid coherence #}
              </div>
            {% else %}
              {% if video.embed_url %}
                <div class="collection-card">
                  <div class="video-embed iframe-embed">
                    <iframe src="{{ video.embed_url }}" allowfullscreen loading="lazy"></iframe>
                  </div>
                  {% if video.title %}
                    <p class="collection-card-title">{{ video.title }}</p>
                  {% endif %}
                </div>
              {% endif %}
            {% endif %}
          {% endwith %}

        {% elif video.embed_url %}
          <div class="collection-card">
            <div class="video-embed iframe-embed">
              <iframe src="{{ video.embed_url }}" allowfullscreen loading="lazy"></iframe>
            </div>
            {# per-video titles intentionally omitted for grid coherence #}
          </div>

        {% endif %}

      {% endfor %}
      {% else %}
        {# Fallback: render at least two local sample videos from repo media. Do not use external URLs. #}
        <div class="collection-card">
          <video controls preload="metadata" loop muted playsinline>
            <source src="/media/commercials/videos/Blue_Black_and_Green_Minimalist_Modern_Customer_Success_Stories_Video_Message.mp4">
            Your browser does not support the video tag.
          </video>
        </div>

        <div class="collection-card">
          <video controls preload="metadata" loop muted playsinline>
            <source src="/media/commercials/videos/Blue_Black_and_Green_Minimalist_Modern_Customer_Success_Stories_Video_Message.mp4">
            Your browser does not support the video tag.
          </video>
        </div>
      {% endif %}
    </div>
  </section>

{% endblock %}
