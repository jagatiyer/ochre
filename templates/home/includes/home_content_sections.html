{% comment %}Render admin-managed HomeContentSection blocks using existing layout patterns.{% endcomment %}

{% if home_content_sections %}
  {% for section in home_content_sections %}
    <section class="collections-page">
      {% if forloop.first %}
      <div class="collections-header">
        {# Micro-heading omitted if not provided in model #}
        <h1>{{ section.title }}</h1>
        {# Description omitted if no subtitle/short description field exists #}
        {% if section.subtitle %}
        <p class="description">{{ section.subtitle }}</p>
        {% endif %}
      </div>
      {% endif %}
      <div class="products-section">
        <div class="story-content">
          {% if section.image_position == 'left' %}
            <div class="story-image">
              {% if section.image and section.image.url %}
                <img src="{{ section.image.url }}" alt="{{ section.title }}">
              {% endif %}
            </div>
            <div class="story-text">
              <h2>{{ section.title }}</h2>
              {{ section.body|linebreaks }}
            </div>
          {% else %}
            <div class="story-text">
              <h2>{{ section.title }}</h2>
              {{ section.body|linebreaks }}
            </div>
            <div class="story-image">
              {% if section.image and section.image.url %}
                <img src="{{ section.image.url }}" alt="{{ section.title }}">
              {% endif %}
            </div>
          {% endif %}
        </div>
      </div>
    </section>
  {% endfor %}
{% endif %}
